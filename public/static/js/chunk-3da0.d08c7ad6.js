(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3da0"],{"68os":function(i,t,e){"use strict";e.r(t);var n=e("Vtdi"),s=e("aifX"),o=e("ygAv"),a={props:["riddle_id"],data:function(){return{emojis:["💪","👍","👏","🎉"],chosenEmoji:""}},mounted:function(){this.randomEmoji()},watch:{riddle_id:{handler:function(){this.randomEmoji()}}},methods:{randomEmoji:function(){this.chosenEmoji=this.emojis[Math.floor(Math.random()*this.emojis.length)]}}},r=e("KHd+"),d=Object(r.a)(a,function(){var i=this,t=i.$createElement;return(i._self._c||t)("span",[i._v(i._s(i.chosenEmoji))])},[],!1,null,null,null);d.options.__file="emoji.vue";var c=d.exports,l={data:function(){return{panZoomOptions:{zoomDoubleClickSpeed:.2,zoomSpeed:.065,initialZoom:1,minZoom:.3,maxZoom:1.5,bounds:!0,boundsPadding:0,autocenter:!1},currentZoom:1,isInfoViewVisible:!1,riddle_id:null,debugPan:!1,bypassXClamp:!1}},computed:{isMobile:function(){return window.innerWidth<=768}},mounted:function(){var i=this;this.isMobile&&(this.panZoomOptions.minZoom=.3,this.panZoomOptions.maxZoom=3),n.bus.listener("TOGGLE_INFO_VIEW",this.toggleInfoView),this._resizeHandler=function(){clearTimeout(i._resizeTO),i._resizeTO=setTimeout(function(){i.isInfoViewVisible&&(i.centerImage(),i.clampPan())},120)},window.addEventListener("resize",this._resizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this._resizeHandler),this._resizeTO&&clearTimeout(this._resizeTO)},methods:{toggleInfoView:function(i){var t=this;i?(this.riddle_id=i,this.isInfoViewVisible=!this.isInfoViewVisible,this.isInfoViewVisible&&this.$nextTick(function(){var i=t.$refs.bigImage;i&&i.complete&&t.centerImage()})):this.isInfoViewVisible=!1},zoomIn:function(){if(this.$refs.pz&&this.$refs.pz.$panZoomInstance){var i=Math.min(1.2*this.currentZoom,this.panZoomOptions.maxZoom);i!==this.currentZoom&&this.zoomAroundCenter(i)}},zoomOut:function(){if(this.$refs.pz&&this.$refs.pz.$panZoomInstance){var i=Math.max(this.currentZoom/1.2,this.panZoomOptions.minZoom);i!==this.currentZoom&&this.zoomAroundCenter(i)}},zoomAroundCenter:function(i){var t=this,e=this.$refs.pz.$panZoomInstance,n=this.$el.querySelector(".pan-wrapper"),s=this.$refs.bigImage;if(e&&n&&s){var o=n.getBoundingClientRect(),a=e.getTransform(),r=a.scale||1,d=o.width/2,c=o.height/2,l=(d-a.x)/r,h=(c-a.y)/r;this.currentZoom=i;var u=d-l*i,m=c-h*i;e.zoomAbs(0,0,i),e.moveTo(u,m),this.$nextTick(function(){t.clampPan()})}},onZoom:function(i){this.$refs.pz&&this.$refs.pz.$panZoomInstance&&(this.currentZoom=this.$refs.pz.$panZoomInstance.getTransform().scale,this.$nextTick(this.clampPan))},onInit:function(i){var t=this;if(this.$refs.pz&&this.$refs.pz.$panZoomInstance){this.debugPan&&console.log("panzoom init",this.$refs.pz.$panZoomInstance);var e=this.$refs.pz.$panZoomInstance;e.setTransformOrigin({x:.5,y:.5});var n=this.$refs.bigImage;n&&(n.style.transformOrigin="0 0"),e.on("pan",function(){t.$nextTick(t.clampPan)}),this.$nextTick(function(){return t.centerImage()})}},onImageLoad:function(){this.fitImageToWidth()},fitImageToWidth:function(){var i=this,t=this.$refs.pz&&this.$refs.pz.$panZoomInstance,e=this.$refs.bigImage,n=this.$el.querySelector(".pan-wrapper");if(t&&e&&n){var s=n.getBoundingClientRect(),o=e.naturalWidth;if(o){var a=s.width/o;a=Math.max(this.panZoomOptions.minZoom,Math.min(this.panZoomOptions.maxZoom,a)),this.currentZoom=a,t.zoomAbs(0,0,a),this.$nextTick(function(){i.centerImage(),i.clampPan()})}}},resetView:function(){var i=this;this.$refs.pz&&this.$refs.pz.$panZoomInstance&&(this.$refs.pz.$panZoomInstance.zoomAbs(0,0,1),this.currentZoom=1,this.$nextTick(function(){i.centerImage(),i.clampPan()}))},centerImage:function(){var i=this.$refs.pz&&this.$refs.pz.$panZoomInstance,t=this.$refs.bigImage;if(i&&t){var e=this.$el.querySelector(".pan-wrapper");if(e){var n=e.getBoundingClientRect(),s=i.getTransform(),o=s.scale||1,a=t.naturalWidth*o,r=t.naturalHeight*o;if(this.debugPan){var d=t.getBoundingClientRect();console.log("[centerImage] wrapW",n.width,"wrapH",n.height,"calcW",a,"rectW",d.width,"scale",o,"t.x",s.x,"t.y",s.y)}var c=(n.width-a)/2,l=(n.height-r)/2;a<=n.width&&(c=0),r<=n.height&&(l=(n.height-r)/2),i.moveTo(c,l)}}},clampPan:function(){var i=this.$refs.pz&&this.$refs.pz.$panZoomInstance,t=this.$refs.bigImage,e=this.$el.querySelector(".pan-wrapper");if(i&&t&&e){var n=e.getBoundingClientRect(),s=i.getTransform(),o=s.scale||1,a=t.naturalWidth*o,r=t.naturalHeight*o,d=s.x,c=s.y,l=Math.min(0,n.width-a),h=0;this.bypassXClamp&&(l=-1/0,h=1/0);var u=Math.min(0,n.height-r),m=d,p=c;d<l&&(m=l),d>h&&(m=h),c<u&&(p=u),c>0&&(p=0),m===d&&p===c||i.moveTo(m,p),this.debugPan&&console.log("[clampPan] wrapW",n.width,"imgWScaled",a,{panX:d,panY:c,nx:m,ny:p,minX:l,maxX:h})}},closeLayer:function(){this.toggleInfoView()}}},h=(e("OCS3"),Object(r.a)(l,function(){var i=this,t=i.$createElement,e=i._self._c||t;return i.isInfoViewVisible?e("div",{staticClass:"info-view"},[e("div",{staticClass:"control-buttons"},[e("button",{on:{click:i.zoomIn}},[i._v("+")]),i._v(" "),e("button",{on:{click:i.zoomOut}},[i._v("-")]),i._v(" "),e("button",{on:{click:i.resetView}},[i._v("⟳")]),i._v(" "),e("button",{on:{click:i.closeLayer}},[i._v("סגור")])]),i._v(" "),i.riddle_id?e("div",{staticClass:"pan-wrapper"},[e("panZoom",{ref:"pz",attrs:{options:i.panZoomOptions},on:{zoom:i.onZoom,init:i.onInit}},[e("img",{ref:"bigImage",staticClass:"big-image",attrs:{src:"static/pdfs/"+i.riddle_id+".webp",alt:"מידע נוסף",loading:"lazy",decoding:"async",draggable:"false"},on:{load:i.onImageLoad}})])],1):i._e()]):i._e()},[],!1,null,"11cea830",null));h.options.__file="infoView.vue";var u={props:["riddle_id"],components:{emoji:c,infoView:h.exports},data:function(){return{auth:n.auth,basicService:new s.a,riddle:!1,answer:"",retries:1,is_locked:!1,is_correct:!1,explain:"",showHint:!1}},computed:{riddles:function(){return this.$store.state.app.riddles||[]},isLoggedin:function(){return this.auth._authenticated}},watch:{riddles:{handler:function(){this.riddles.length>0&&this.updateRiddleData()},immediate:!0,deep:!0},riddle_id:{handler:function(){this.riddles.length>0&&this.updateRiddleData()}}},mounted:function(){window.ganewByMeta("riddle_"+this.riddle_id,"riddle_"+this.riddle_id)},methods:{showInfo:function(){window.innerWidth>768?window.open("static/pdfs/"+this.riddle_id+".webp","_blank"):n.bus.dispatchEvent("TOGGLE_INFO_VIEW",this.riddle_id)},openPDF:function(i){window.open(i,"_blank")},displayHint:function(){this.showHint=!this.showHint},updateRiddleData:function(){var i=this;n.bus.dispatchEvent("TOGGLE_INFO_VIEW"),this.riddle=this.riddles.find(function(t){return t.id===parseInt(i.riddle_id)}),this.retries=this.riddle.retries,this.is_locked=!1,this.is_correct=!!this.riddle.is_correct,this.explain=this.is_correct?this.riddle.explain:"",setTimeout(function(){document.getElementById("focusHere").focus()},200)},send:function(){var i=this;if(this.isLoggedin)if(this.is_locked)o.a.showMessage("You have sent too many incorrect solutions for this riddle","Error");else if(""!==this.answer){var t={id_riddle:this.riddle.id,answer:this.answer};this.basicService.sendSolution(t).then(function(t){if(t.data.is_correct)o.a.showMessage(""+t.data.exp,"🎉 תשובה נכונה! 🎉"),i.$store.dispatch("updateRiddles");else{if(422===t.status)return i.answer="",void o.a.showMessage(t.data.msg,"Notice");o.a.showMessage("התשובה ששלחתם אינה נכונה, נסו שוב...","תשובה אינה נכונה"),i.$store.dispatch("updateRiddles")}i.answer=""})}else o.a.showMessage("לא ניתן לשלוח פיתרון ריק","שגיאה");else this.$router.push({name:"login"})}}},m=(e("zDNF"),Object(r.a)(u,function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"routerContainerWrapper newTopPos"},[n("div",{staticClass:"routerContainer"},[n("infoView"),i._v(" "),n("div",{staticClass:"close onlyMobile"},[n("router-link",{attrs:{to:"/home",tabindex:"0"}},[n("img",{attrs:{src:e("KRW6"),alt:"close"}})])],1),i._v(" "),i.riddle?n("div",{class:["riddlesHolder",{correct:i.is_correct}]},[n("h1",{attrs:{id:"focusHere",tabindex:"0"}},[i._v("כתב חידה "+i._s(i.riddle.id)+":"),n("br"),i._v(i._s(i.riddle.title))]),i._v(" "),n("div",{staticClass:"riddleText",attrs:{tabindex:"0"}},[i._v(i._s(i.riddle.text))]),i._v(" "),n("div",{staticClass:"send"},[n("div",{directives:[{name:"show",rawName:"v-show",value:i.is_correct,expression:"is_correct"}],staticClass:"explaination",attrs:{tabindex:"0"}},[n("span",[n("emoji",{staticStyle:{display:"inline"},attrs:{riddle_id:i.riddle_id}}),i._v("כבר פתרת את החידה הזו\n                  "),n("emoji",{staticStyle:{display:"inline"},attrs:{riddle_id:i.riddle_id}})],1),n("br"),i._v("\n               הסבר: "+i._s(i.explain)+"\n            ")]),i._v(" "),n("div",{staticClass:"buttons"},[n("button",{staticClass:"riddleInfoBTN",attrs:{tabindex:"0",target:"_blank"},on:{click:i.showInfo}},[i._v("תוכן האתגר")]),i._v(" "),n("button",{attrs:{tabindex:"0"},on:{click:i.displayHint}},[i._v("רמז")])]),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!i.is_correct,expression:"!is_correct"}],staticClass:"inputField"},[n("form",{on:{submit:function(t){return t.preventDefault(),i.send.apply(null,arguments)}}},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:i.answer,expression:"answer"}],attrs:{type:"text",placeholder:"הפתרון שלי",disabled:i.is_locked,tabindex:"0"},domProps:{value:i.answer},on:{input:function(t){t.target.composing||(i.answer=t.target.value)}}}),i._v(" "),n("button",{attrs:{type:"submit",tabindex:"0"}},[i._v("שלחו")])])]),i._v(" "),n("span",[i._v("\n                  כדי לפתור את החידה, קראו תחילה את תוכן האתגר המצורף\n               ")])]),i._v(" "),n("div",{staticClass:"logoRiddle"})])]):i._e(),i._v(" "),i.riddle?n("div",{directives:[{name:"show",rawName:"v-show",value:i.showHint,expression:"showHint"}],staticClass:"hintContainer",attrs:{tabindex:"0"}},[n("div",{staticClass:"close",attrs:{tabindex:"0"},on:{keyup:function(t){return!t.type.indexOf("key")&&i._k(t.keyCode,"enter",13,t.key,"Enter")?null:i.displayHint.apply(null,arguments)},click:i.displayHint}},[n("img",{attrs:{src:e("KRW6"),alt:"סגור"}})]),i._v(" "),n("div",{staticClass:"hintText",attrs:{tabindex:"0"}},[i._v(i._s(i.riddle.hint))])]):i._e()],1)])},[],!1,null,"07e27d24",null));m.options.__file="riddle.vue";t.default=m.exports},"9+MF":function(i,t,e){},HW7D:function(i,t,e){},KRW6:function(i,t){i.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJ1dWlkLWJjNDhkNzRjLTlmODMtNDU5Zi05MzZjLTE4NjQ4MDJmOGE4NyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgNDUuOTEgNDYuNjQiPjxkZWZzPjxzdHlsZT4udXVpZC0yOWFhNzY0MS00NWYzLTRiM2UtOWNkMi1kMzM1OGVhNjY2MTd7ZmlsbDojZmZmO30udXVpZC0yOWFhNzY0MS00NWYzLTRiM2UtOWNkMi1kMzM1OGVhNjY2MTcsLnV1aWQtNDdmZDI5OTEtMjY2My00YzliLWIxNTYtM2ZiY2U1NzA5ZjBme3N0cm9rZS13aWR0aDoxcHg7fS51dWlkLTQ3ZmQyOTkxLTI2NjMtNGM5Yi1iMTU2LTNmYmNlNTcwOWYwZntmaWxsOiMwMDc0YmI7fTwvc3R5bGU+PC9kZWZzPjxnIGlkPSJ1dWlkLTA1ZWFiNGUzLTZmMWItNDNhMS05MDQ2LTg5ZTFlZjM3N2I0ZiI+PGVsbGlwc2UgY2xhc3M9InV1aWQtNDdmZDI5OTEtMjY2My00YzliLWIxNTYtM2ZiY2U1NzA5ZjBmIiBjeD0iMjIuOTYiIGN5PSIyMy4zMiIgcng9IjIyLjk2IiByeT0iMjMuMzIiLz48cGF0aCBjbGFzcz0idXVpZC0yOWFhNzY0MS00NWYzLTRiM2UtOWNkMi1kMzM1OGVhNjY2MTciIGQ9Ik0zMS40MiwzMy43MmMtLjQ2LDAtLjkxLS4xOC0xLjI2LS41M0wxMy4yNCwxNmMtLjctLjcxLS43LTEuODUsMC0yLjU2czEuODItLjcxLDIuNTIsMGwxNi45MiwxNy4xOWMuNy43MS43LDEuODUsMCwyLjU2LS4zNS4zNS0uOC41My0xLjI2LjUzWiIvPjxwYXRoIGNsYXNzPSJ1dWlkLTI5YWE3NjQxLTQ1ZjMtNGIzZS05Y2QyLWQzMzU4ZWE2NjYxNyIgZD0iTTE0LjQ5LDMzLjcyYy0uNDYsMC0uOTEtLjE4LTEuMjYtLjUzLS43LS43MS0uNy0xLjg1LDAtMi41NkwzMC4xNiwxMy40NWMuNy0uNzEsMS44Mi0uNzEsMi41Miwwcy43LDEuODUsMCwyLjU2bC0xNi45MiwxNy4xOWMtLjM1LjM1LS44LjUzLTEuMjYuNTNaIi8+PC9nPjwvc3ZnPg=="},OCS3:function(i,t,e){"use strict";var n=e("9+MF");e.n(n).a},zDNF:function(i,t,e){"use strict";var n=e("HW7D");e.n(n).a}}]);